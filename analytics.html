<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MPS HR Consulting - Phân tích & Báo cáo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #0056b3;
            --secondary-color: #ff6b00;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #333;
            background-color: #f8f9fa;
        }
        
        .navbar {
            background-color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .navbar-brand img {
            height: 40px;
        }
        
        .nav-link {
            color: var(--dark-color);
            font-weight: 500;
            margin: 0 10px;
        }
        
        .nav-link:hover {
            color: var(--primary-color);
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-secondary {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }
        
        .page-header {
            background: linear-gradient(rgba(0, 86, 179, 0.8), rgba(0, 86, 179, 0.9)), url('/assets/analytics-header.jpg');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 60px 0;
        }
        
        .dashboard-card {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
            padding: 20px;
            margin-bottom: 20px;
            height: 100%;
        }
        
        .dashboard-card .card-title {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .metric-card {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .metric-card:hover {
            transform: translateY(-5px);
        }
        
        .metric-card .metric-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .metric-card .metric-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
            color: var(--dark-color);
        }
        
        .metric-card .metric-label {
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        
        .nav-tabs .nav-link {
            color: #495057;
            border: none;
            border-bottom: 2px solid transparent;
            padding: 0.5rem 1rem;
            margin-right: 1rem;
        }
        
        .nav-tabs .nav-link.active {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            font-weight: 600;
        }
        
        .report-controls {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .report-container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .report-title {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e9ecef;
        }
        
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 60px 0 30px;
        }
        
        .footer-links h5 {
            font-weight: 600;
            margin-bottom: 20px;
        }
        
        .footer-links ul {
            list-style: none;
            padding-left: 0;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: #ddd;
            text-decoration: none;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        .social-icons a {
            color: white;
            font-size: 1.5rem;
            margin-right: 15px;
        }
        
        .copyright {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light sticky-top">
        <div class="container">
            <a class="navbar-brand" href="/">
                <img src="/assets/mps-logo.png" alt="MPS Logo">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/admin">Bảng điều khiển</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/admin/candidates">Ứng viên</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/admin/jobs">Việc làm</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/admin/clients">Khách hàng</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="/admin/analytics">Phân tích</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user-circle"></i> Admin
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="/admin/profile"><i class="fas fa-user me-2"></i> Hồ sơ</a></li>
                            <li><a class="dropdown-item" href="/admin/settings"><i class="fas fa-cog me-2"></i> Cài đặt</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="/logout"><i class="fas fa-sign-out-alt me-2"></i> Đăng xuất</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto text-center">
                    <h1 class="fw-bold">Phân tích & Báo cáo</h1>
                    <p class="lead">Theo dõi hiệu suất tuyển dụng và phân tích dữ liệu để tối ưu hóa quy trình</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Analytics Dashboard -->
    <section class="py-5">
        <div class="container">
            <!-- Tabs -->
            <ul class="nav nav-tabs mb-4" id="analyticsTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="dashboard-tab" data-bs-toggle="tab" data-bs-target="#dashboard" type="button" role="tab" aria-controls="dashboard" aria-selected="true">Bảng điều khiển</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="reports-tab" data-bs-toggle="tab" data-bs-target="#reports" type="button" role="tab" aria-controls="reports" aria-selected="false">Báo cáo</button>
                </li>
            </ul>
            
            <!-- Tab Content -->
            <div class="tab-content" id="analyticsTabsContent">
                <!-- Dashboard Tab -->
                <div class="tab-pane fade show active" id="dashboard" role="tabpanel" aria-labelledby="dashboard-tab">
                    <!-- Date Range Selector -->
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <h2 class="h4">Tổng quan hiệu suất tuyển dụng</h2>
                        </div>
                        <div class="col-md-6 text-md-end">
                            <select class="form-select form-select-sm d-inline-block w-auto" id="analytics-date-range">
                                <option value="week">7 ngày qua</option>
                                <option value="month" selected>30 ngày qua</option>
                                <option value="quarter">Quý hiện tại</option>
                                <option value="year">Năm hiện tại</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Dashboard Content -->
                    <div id="analytics-dashboard">
                        <!-- Summary Metrics -->
                        <div class="row mb-4">
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-icon">
                                        <i class="fas fa-file-alt"></i>
                                    </div>
                                    <div class="metric-value" id="metric-new-applications">125</div>
                                    <div class="metric-label">Hồ sơ mới</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-icon">
                                        <i class="fas fa-briefcase"></i>
                                    </div>
                                    <div class="metric-value" id="metric-active-jobs">42</div>
                                    <div class="metric-label">Vị trí đang tuyển</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-icon">
                                        <i class="fas fa-chart-line"></i>
                                    </div>
                                    <div class="metric-value" id="metric-placement-rate">68%</div>
                                    <div class="metric-label">Tỷ lệ tuyển dụng</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-icon">
                                        <i class="fas fa-clock"></i>
                                    </div>
                                    <div class="metric-value" id="metric-time-to-hire">18 ngày</div>
                                    <div class="metric-label">Thời gian tuyển dụng TB</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Charts Row 1 -->
                        <div class="row mb-4">
                            <div class="col-lg-6">
                                <div class="dashboard-card">
                                    <h5 class="card-title">Phễu Tuyển dụng</h5>
                                    <div class="chart-container">
                                        <canvas id="chart-recruitment-funnel"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="dashboard-card">
                                    <h5 class="card-title">Hồ sơ theo Phòng ban</h5>
                                    <div class="chart-container">
                                        <canvas id="chart-applications-by-department"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Charts Row 2 -->
                        <div class="row mb-4">
                            <div class="col-lg-8">
                                <div class="dashboard-card">
                                    <h5 class="card-title">Xu hướng Hồ sơ</h5>
                                    <div class="chart-container">
                                        <canvas id="chart-application-trend"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="dashboard-card">
                                    <h5 class="card-title">Thời gian Tuyển dụng</h5>
                                    <div class="chart-container">
                                        <canvas id="chart-time-to-hire"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Charts Row 3 -->
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="dashboard-card">
                                    <h5 class="card-title">Hiệu quả Nguồn Tuyển dụng</h5>
                                    <div class="chart-container">
                                        <canvas id="chart-source-effectiveness"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="dashboard-card">
                                    <h5 class="card-title">Tỷ lệ Giữ chân Ứng viên</h5>
                                    <div class="chart-container">
                                        <canvas id="chart-candidate-retention"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Reports Tab -->
                <div class="tab-pane fade" id="reports" role="tabpanel" aria-labelledby="reports-tab">
                    <!-- Report Controls -->
                    <div class="report-controls">
                        <div class="row">
                            <div class="col-md-4">
                                <label for="report-type" class="form-label">Loại báo cáo</label>
                                <select class="form-select" id="report-type">
                                    <option value="summary">Báo cáo Tổng hợp</option>
                                    <option value="recruiter-performance">Hiệu suất Tuyển dụng viên</option>
                                    <option value="department-hiring">Tuyển dụng theo Phòng ban</option>
                                    <option value="source-analysis">Phân tích Nguồn Tuyển dụng</option>
                                    <option value="candidate-quality">Chất lượng Ứng viên</option>
                                    <option value="retention-analysis">Phân tích Giữ chân Nhân viên</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="report-date-range" class="form-label">Khoảng thời gian</label>
                                <select class="form-select" id="report-date-range">
                                    <option value="week">7 ngày qua</option>
                                    <option value="month" selected>30 ngày qua</option>
                                    <option value="quarter">Quý hiện tại</option>
                                    <option value="year">Năm hiện tại</option>
                                    <option value="custom">Tùy chỉnh</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Xuất báo cáo</label>
                                <div>
                                    <button id="export-excel" class="btn btn-success me-2">
                                        <i class="fas fa-file-excel me-1"></i> Excel
                                    </button>
                                    <button id="export-pdf" class="btn btn-danger">
                                        <i class="fas fa-file-pdf me-1"></i> PDF
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Report Content -->
                    <div class="report-container">
                        <h3 class="report-title" id="report-title">Báo cáo Tổng hợp</h3>
                        <div id="report-container">
                            <!-- Report data will be loaded here -->
                            <table class="table table-striped table-hover">
                                <thead class="table-primary">
                                    <tr>
                                        <th>Chỉ số</th>
                                        <th>Giá trị</th>
                                        <th>So với kỳ trước</th>
                                        <th>Xu hướng</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Tổng số hồ sơ</td>
                                        <td>475</td>
                                        <td>+12%</td>
                                        <td>Tăng</td>
                                    </tr>
                                    <tr>
                                        <td>Tỷ lệ phỏng vấn</td>
                                        <td>49%</td>
                                        <td>+5%</td>
                                        <td>Tăng</td>
                                    </tr>
                                    <tr>
                                        <td>Tỷ lệ đề xuất</td>
                                        <td>21%</td>
                                        <td>-2%</td>
                                        <td>Giảm</td>
                                    </tr>
                                    <tr>
                                        <td>Tỷ lệ tuyển dụng</td>
                                        <td>10%</td>
                                        <td>+1%</td>
                                        <td>Tăng</td>
                                    </tr>
                                    <tr>
                                        <td>Thời gian tuyển dụng TB</td>
                                        <td>18 ngày</td>
                                        <td>-3 ngày</td>
                                        <td>Cải thiện</td>
                                    </tr>
                                    <tr>
                                        <td>Chi phí tuyển dụng TB</td>
                                        <td>2.5 triệu</td>
                                        <td>-8%</td>
                                        <td>Cải thiện</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4 mb-lg-0">
                    <img src="/assets/mps-logo-white.png" alt="MPS Logo" class="mb-4" style="height: 40px;">
                    <p>MPS HR Consulting cung cấp giải pháp nhân sự toàn diện cho doanh nghiệp FDI tại Việt Nam, giúp doanh nghiệp tìm kiếm và phát triển đội ngũ nhân tài phù hợp.</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 mb-4 mb-md-0">
                    <div class="footer-links">
                        <h5>Liên kết</h5>
                        <ul>
                            <li><a href="/">Trang chủ</a></li>
                            <li><a href="/about">Về chúng tôi</a></li>
                            <li><a href="/services">Dịch vụ</a></li>
                            <li><a href="/jobs">Việc làm</a></li>
                            <li><a href="/contact">Liên hệ</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4 mb-4 mb-md-0">
                    <div class="footer-links">
                        <h5>Dịch vụ</h5>
                        <ul>
                            <li><a href="/services#executive">Tuyển dụng cấp cao</a></li>
                            <li><a href="/services#general">Tuyển dụng lao động phổ thông</a></li>
                            <li><a href="/services#outsourcing">Tuyển dụng thuê ngoài</a></li>
                            <li><a href="/services#legal">Tư vấn luật lao động</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="footer-links">
                        <h5>Liên hệ</h5>
                        <ul>
                            <li><i class="fas fa-map-marker-alt me-2"></i> 123 Đường ABC, Quận 1, TP.HCM</li>
                            <li><i class="fas fa-phone me-2"></i> (028) 1234 5678</li>
                            <li><i class="fas fa-envelope me-2"></i> info@mps.net.vn</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="text-center copyright">
                <p>&copy; 2025 MPS HR Consulting. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/js/analytics.js"></script>
</body>
</html>
